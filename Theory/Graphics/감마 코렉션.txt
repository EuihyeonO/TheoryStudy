

인간은 작은 자극에서는 자극의 변화를 크게 감지하지만
큰 자극에서는 자극의 변화를 쉽게 느끼지 못한다.

이를 빛에 적용해 본다면, 어두운 빛에서는 밝기를 더 쉽게 구분하지만
밝아질수록 밝기의 차이를 잘 구분하지 못하게 된다.

즉, 어느정도 어두움이 있어야 색을 더욱 선명하게 감지할 수 있다는 것이다.

모니터와 같은 디스플레이는 일반적으로 이를 고려하여 실제 출력되는 색상을 다소 어둡게 만든다.
이 과정을 감마보정이라고 한다. 

어둡게 하는 정도는 감마 수치라고 하는데, 일반적인 감마 수치는 2.2f 정도 이며 0~1사이의 색상에 2.2f를 제곱하게 되면
인간의 눈에 적합한 색상으로 출력이 되는 것이다.

포토샵과 같은 이미지 편집 툴은 디자이너가 정확한 색상을 구별하고 디자인하는 것이 중요하기 때문에 모니터의 감마를 상쇄하는 과정을 거친다.
실제 디자이너가 찍은 RGB색상에 1/(2.2) 제곱을 하게 되며, 모니터로 출력되면서 2.2제곱을 하면서 실제 눈으로는 정확한 RGB값을 볼 수 있게 된다.

이처럼 감마를 상쇄하는 과정에서 문제가 발생한다.
쉐이더 내부에서 이미지를 샘플링하게 되면 실제 디자이너가 선택한 RGB값이 아닌, RGB^(1/2.2)의 값이 샘플링 되기 때문이다.

이게 문제가 되는 이유는 여러가지가 있지만, 첫 번째는 블렌딩의 문제이다.
예를 들면 디자이너는 0.5의 색상과 0.5의 색상을 합쳐 1.0이 되는 것을 의도했지만
쉐이더에선 (0.5)^(1/2.2f) +  (0.5)^(1/2.2f) 의 연산을 하기 때문에 1.0을 초과하는 색상 값이 나와버린다.
반대로 0.5의 색상에서 0.5의 색상을 빼서 0이 되는 것을 의도했더라도, 실제 값은 음수가 나와버린다.
블렌딩의 경우엔 0~1사이를 넘어가면 어떠한 색상이 나올지 예측이 불가능하기 때문에 올바른 연산을 하는 것이 중요하다.

또한, 빛을 연산하는 과정에서도 잘못된 색상값을 기준으로 연산을 하기 때문에 의도한 색이 나오지 않을 수 있다.

이 때문에 쉐이더에서는 감마를 다시 적용하여 빛, 블렌딩 등의 연산을 진행한 후에 다시 감마를 상쇄하여 이를 출력해야 한다.
텍스쳐를 샘플링 한 이후에 색상에 2.2f 제곱해주고, 모든 연산이 끝난 뒤 (1.0/2.2f)를 제곱해주면 된다.